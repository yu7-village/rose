import type { ChannelState, LocalPersonAdapter, LocalStream, PersonInit, Publication, PublicationImpl, RemoteStream, SkyWayChannelImpl, SkyWayContext, SubscriptionImpl } from '@skyway-sdk/core';
import type { PublicationType } from '@skyway-sdk/model';
import { type SFUBotPlugin } from '@skyway-sdk/sfu-bot';
import type { RoomMember, RoomMemberImpl } from '../member';
import type { LocalRoomMember, LocalRoomMemberImpl } from '../member/local/default';
import type { LocalP2PRoomMemberImpl } from '../member/local/p2p';
import type { LocalSFURoomMemberImpl } from '../member/local/sfu';
import { type RoomPublication, RoomPublicationImpl } from '../publication';
import { type RoomSubscription, RoomSubscriptionImpl } from '../subscription';
import type { RoomType } from '.';
import type { Room } from './default';
import type * as event from './event';
export declare type RoomState = ChannelState;
/**@internal */
export declare abstract class RoomBase implements Room {
    _channel: SkyWayChannelImpl;
    readonly type: RoomType;
    protected abstract _disableSignaling: boolean;
    protected _members: {
        [memberId: string]: RoomMemberImpl;
    };
    /**@private */
    static _createBot(context: SkyWayContext, channel: SkyWayChannelImpl): Promise<SFUBotPlugin>;
    /**@private */
    _getMember(id: string): RoomMemberImpl;
    protected _publications: {
        [publicationId: string]: RoomPublicationImpl;
    };
    /**@private */
    _getPublication(id: string): RoomPublicationImpl<LocalStream>;
    /**@private */
    _getOriginPublication(publicationId: string): RoomPublicationImpl<LocalStream> | undefined;
    /**@private */
    _addPublication<T extends LocalStream>(p: Publication): RoomPublication<T>;
    protected _subscriptions: {
        [subscriptionId: string]: RoomSubscriptionImpl;
    };
    /**@private */
    _getSubscription(id: string): RoomSubscriptionImpl<RemoteStream>;
    /**@private */
    _addSubscription(s: SubscriptionImpl): RoomSubscriptionImpl<RemoteStream>;
    localRoomMember?: LocalRoomMember;
    readonly _context: SkyWayContext;
    private readonly _events;
    readonly onClosed: import("@skyway-sdk/common").Event<event.RoomClosedEvent>;
    readonly onMetadataUpdated: import("@skyway-sdk/common").Event<event.RoomMetadataUpdatedEvent>;
    readonly onMemberJoined: import("@skyway-sdk/common").Event<event.MemberJoinedEvent>;
    readonly onMemberLeft: import("@skyway-sdk/common").Event<event.MemberLeftEvent>;
    readonly onMemberListChanged: import("@skyway-sdk/common").Event<event.ListChangedEvent>;
    readonly onMemberMetadataUpdated: import("@skyway-sdk/common").Event<event.MemberMetadataUpdatedEvent>;
    readonly onStreamPublished: import("@skyway-sdk/common").Event<event.StreamPublishedEvent>;
    readonly onStreamUnpublished: import("@skyway-sdk/common").Event<event.StreamUnpublishedEvent>;
    readonly onPublicationListChanged: import("@skyway-sdk/common").Event<event.ListChangedEvent>;
    readonly onPublicationMetadataUpdated: import("@skyway-sdk/common").Event<event.PublicationMetadataUpdatedEvent>;
    readonly onPublicationEnabled: import("@skyway-sdk/common").Event<event.PublicationEnabledEvent>;
    readonly onPublicationDisabled: import("@skyway-sdk/common").Event<event.PublicationDisabledEvent>;
    readonly onPublicationSubscribed: import("@skyway-sdk/common").Event<event.StreamSubscribedEvent>;
    readonly onPublicationUnsubscribed: import("@skyway-sdk/common").Event<event.StreamUnsubscribedEvent>;
    readonly onSubscriptionListChanged: import("@skyway-sdk/common").Event<event.ListChangedEvent>;
    get id(): string;
    get name(): string;
    get metadata(): string | undefined;
    get state(): ChannelState;
    get disposed(): boolean;
    constructor(type: RoomType, _channel: SkyWayChannelImpl);
    private _handleOnMemberMetadataUpdate;
    private _setChannelState;
    private _setChannelListener;
    private _handleOnMemberJoin;
    private _handleOnMemberLeft;
    private _handleOnStreamPublish;
    private _handleOnStreamUnpublish;
    private _handleOnPublicationMetadataUpdate;
    private _handleOnPublicationEnabled;
    private _handleOnPublicationDisabled;
    private _handleOnStreamSubscribe;
    private _handleOnStreamUnsubscribe;
    get members(): RoomMember[];
    get publications(): RoomPublication[];
    get subscriptions(): RoomSubscription[];
    private _joinChannel;
    protected abstract _getTargetPublication(publicationId: string, publicationType?: PublicationType): RoomPublication | undefined;
    protected abstract _createLocalRoomMember<T extends LocalRoomMemberImpl | LocalP2PRoomMemberImpl | LocalSFURoomMemberImpl>(local: LocalPersonAdapter, room: this): T;
    protected abstract _isAcceptablePublication(p: PublicationImpl): boolean;
    join<T extends LocalRoomMemberImpl | LocalP2PRoomMemberImpl | LocalSFURoomMemberImpl>(memberInit?: RoomMemberInit): Promise<T>;
    leave(member: RoomMember): Promise<void>;
    updateMetadata(metadata: string): Promise<void>;
    close(): Promise<void>;
    dispose(): Promise<void>;
    toJSON(): {
        type: "sfu" | "p2p" | "default";
        id: string;
        name: string;
        metadata: string | undefined;
        members: RoomMember[];
        publications: RoomPublication<LocalStream>[];
        subscriptions: RoomSubscription<RemoteStream>[];
    };
}
export declare type RoomMemberInit = PersonInit;
//# sourceMappingURL=base.d.ts.map